{% extends "base.html" %}
{% load static %}

{% block page_header %}

{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col6 center-align">    
            <h2>Tours</h2>
        </div>
    </div>
    <div class="row">
        <!--
        <div class="col m4 center-align">
            <form method="GET" action="{% url 'tours' %}">
                <div class="input-field">
                    <input id="search" type="search" required name="q" placeholder="Search our site">                  
                        <button type="submit">                            
                                <i class="fas fa-search"></i>                            
                        </button>                    
                </div>
            </form>
        </div> 
        -->  
        <div class="col m4 offset-m4 center-align">            
                <!-- Dropdown Trigger -->
            <h6><a class="dropdown-trigger white-text" href="#" data-target="dropdown3" style="; padding: 2px;">
                Filter by Tour <i class="far fa-arrow-alt-circle-down"></i>
            </a></h6>
            <!-- Dropdown Structure -->
            <ul id="dropdown3" class="dropdown-content">
                {% for tour in tours %}
                <li><a href="{% url 'tours' %}?tour={{tour.name}}">{{tour.friendly_name}}</a></li>                    
                <li class="divider" tabindex="-1"></li>
                {% endfor %}                    
            </ul>
            <p><a href="{% url 'tours' %}" class="btn btn-white">Reset</a>  </p>       
        </div>  
        <!--
        <div class="col m4 center-align">            
                 
                <a class="dropdown-trigger white-text" href="#" data-target="dropdown4">Select Stadium Location</a>
                
                <ul id="dropdown4" class="dropdown-content">
                    {% for s in stadiums %}
                    <li><a href="{% url 'tours' %}?stadium={{s.name}}">{{s.name}}</a></li>                    
                    <li class="divider" tabindex="-1"></li>
                    {% endfor %}                    
                </ul>
            </div>
        -->
         
    </div>
    
    {% for tour in tours %}
        <div class="row center-align" style="background-image: url('{{tour.image_url}}'); background-size: cover;
	-webkit-background-size: cover;	-moz-background-size: cover;	-o-background-size: cover;
	background-repeat: no-repeat;	background-position: 50% 50%; min-height: 60vh;">
            <h3 style="padding-top: 25px;">{{tour.friendly_name}}</h3>
            <div class="col m6 offset-m6 center-align">                
                {% for match in matches %}
                    {% if match.tour == tour%}
                    <p>{{match.name}}, {{match.stadium.full_name}}: {{match.date}}</p>
                    <a href="{% url 'tickets' match.id %}" class="btn btn-blue" >Buy tickets</a>
                    {% if request.user.is_superuser %}
                    <a href="{% url 'edit_match' match.id %}" class="btn btn-white" >Edit match</a>
                    <a href="{% url 'delete_match' match.id %}" class="btn btn-blue" >Delete match</a>
                    {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            
        </div> 
    {% endfor %}
                    
</div>
<div class="btt-button">
    <a href="" class="btn btn-blue btt-link">Back to Top</a>
</div>

{% endblock %}
{% block postloadjs %}
    {{block.super}}
    <script type="text/javascript">
        $(.btt-link).click(function(e){
            window.scrollTo(0,0)
        })
    </script>
    {{endblock}}
{% endblock %}